---
layout: single
categories:
    - baekjoon
tags:
    - baekjoon
    - ë°±ì¤€
    - ì½”í…Œ
comments: true
title: "ë°±ì¤€(boj)10838 - íŠ¸ë¦¬"
---


ë¬¸ì œ ë§í¬ - [https://www.acmicpc.net/problem/10838](https://www.acmicpc.net/problem/10838){:target="_blank"}

## ğŸ‘€ë¬¸ì œì´í•´ ë° í’€ì´ë°©ë²•
lcaë¬¸ì œì´ë‹¤ ê·¼ë° ì§€ê¸ˆê¹Œì§€ ì•Œê³ ìˆë˜ lcaê°€ ì•„ë‹ˆë‹¤ ê³ ìƒì„ ì¢€ í–ˆë‹¤<br>
ì¤‘ìš”í•œê±´ lca(a,bì˜ ìµœë‹¨ê²½ë¡œì˜ ê¸¸ì´)ê°€ 1000ê°œ ì•ˆì— ìˆë‹¤ëŠ” ê²ƒê³¼ depthë¥¼ ì‚¬ìš©í•˜ë©´ ì•ˆëœë‹¤ëŠ” ê²ƒì´ë‹¤<br>
<br>
í•´ë³´ë©´ ì•Œê² ì§€ë§Œ depthë¥¼ ì—…ë°ì´íŠ¸ í•˜ë©´ì„œ í’€ë©´ ë°”ë¡œ ì‹œê°„ì´ˆê³¼ë‹¤ ê·¸ë˜ì„œ 1000ê°œ ì•ˆì— lcaê°€ ìˆë‹¤ëŠ” ì¡°ê±´ì„ ì£¼ì–´ì¤€ê²ƒ ê°™ë‹¤<br>
ì½”ë“œë¥¼ ëª‡ë²ˆì„ ê°ˆì•„ì—ì—ˆëŠ”ë° í›„.. ë³„ë¡œ ì¢‹ì€ë¬¸ì œëŠ” ì•„ë‹Œ ê²ƒ ê°™ë‹¤ ê·¸ëƒ¥ ì¶œì œìì˜ ì…ë§›ì— ë§ì¶° í’€ì–´ì•¼í•˜ëŠ” ëŠë‚Œì´ë‹¤ğŸ˜¥<br>
<br>
ë¬¸ì œë¥¼ ì´í•´ í–ˆë‹¤ë©´ depthë”°ìœ„ ì—†ì´ ë…¸ë“œì— 'ë¶€ëª¨ë…¸ë“œ'ì™€ 'ë¶€ëª¨ë…¸ë“œì™€ ì´ì–´ì§€ëŠ” ê°„ì„ ì˜ ìƒ‰' ë”± 2ê°œë§Œ ì €ì¥í•˜ì—¬ í’€ì–´ë³´ë©´ ìƒê°ë³´ë‹¤ ì‰½ê²Œ í’€ë¦°ë‹¤<br>
ëˆ„ê°€ë´ë„ lcaë¬¸ì œì— lcaë¥¼ ì‚¬ìš©í•˜ë©´ ì‹œê°„ì´ˆê³¼ ë‚˜ê³  depthì—†ì´ forë¬¸ìœ¼ë¡œ 1000ë²ˆ ëŒë ¤ì„œ lcaë¥¼ ì°¾ê²Œ ë§Œë“  ë¬¸ì œê°€ ë§ë‚˜ ì‹¶ë‹¤<br>
lcaë¥¼ ì°¾ì„ ë•Œì—ëŠ” Nê°œì§œë¦¬ visitë°°ì—´(ì½”ë“œì—ì„œëŠ” findë¼ëŠ”ì´ë¦„ìœ¼ë¡œ ì”€)ì„ ì„ ì–¸í•˜ê³  aë¥¼1000ë²ˆ ëŒë ¤ì„œ visitì±„ìš°ê³  bë¥¼ 1000ë²ˆ ëŒë ¤ì„œ ê°€ì¥ ì²˜ë¦„ ë§Œë‚˜ëŠ” ê³³ì´ lcaì´ë‹¤<br>
ì§„ë•€ ëº€ ë¬¸ì œì˜€ë‹¤ğŸ”¥<br>


## ğŸ“ì½”ë“œ
  
```cpp
#include <iostream>
#include <vector>
#include <unordered_set>
using namespace std;
struct _node{
    int parent=0;
    int color=0;
};
class tree_query{
private:
    vector<_node> tree;
    int N,K;
public:
    tree_query(){
        std::cin >> N >> K;
        tree.resize(N);
    }
    void query(){
        int q,a,b,c;
        for(int i=0;i<K;i++){
            std::cin >> q;
            if(q ==1){
                std::cin >> a >> b >> c;
                paint(a,b,c);
            }
            else if(q==2){
                std::cin >> a>> b;
                move(a,b);
            }
            else if(q==3){
                std::cin >>a >> b;
                std::cout << count(a,b) << '\n';
            }
        }
    }
    int find_lca(int a,int b){
        vector<bool> find(N,false);
        for(int i=0;i<1000;i++){
            find[a]=true;
            a=tree[a].parent;
        }
        for(int i=0;i<1000;i++){
            if(find[b])
                return b;
            b=tree[b].parent;
        }
        return 0;
    }
    void paint(int a,int b,int c){
        int lca = find_lca(a,b);
        while(a!=lca){
            tree[a].color=c;
            a=tree[a].parent;
        }
        while(b!=lca){
            tree[b].color=c;
            b=tree[b].parent;
        }

    }
    void move(int a,int b){
        tree[a].parent=b;
    }
    int count(int a,int b){
        unordered_set<int> S;
        int lca =find_lca(a,b);
        while(a!=lca){
            S.insert(tree[a].color);
            a=tree[a].parent;
        }
        while(b!=lca){
            S.insert(tree[b].color);
            b=tree[b].parent;
        }
        return S.size();
    }
};
int main(){
    cin.tie(NULL);cout.tie(NULL);
    ios_base::sync_with_stdio(false);
    tree_query tq;
    tq.query();
    return 0;
}
```

![image](/assets/images/baekjoon/10838_1.png){:.align-center}  <br>