---
layout: single
categories:
    - study
tags:
    - django
    - ì‹œí¬ë¦¿ í‚¤
    - secrets
comments: true
title: "[django] SECRET_KEY ë¶„ë¦¬í•˜ê¸°"
---

ì•ˆë…•í•˜ì„¸ìš”!ğŸ‘‹<br>
ì¥ê³ ì—ëŠ” í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•˜ë©´ SECRET_KEYê°€ ì£¼ì–´ì§€ëŠ”ë° ì´ë¥¼ gitì‚¬ì´íŠ¸ì— ì½”ë“œë¥¼ ì˜¬ë¦´ë•Œ ê³µê°œë˜ì§€ ì•Šë„ë¡ ìˆ¨ê¸°ëŠ” ë°©ë²•ì— ëŒ€í•´ ì ì–´ë³´ë ¤ í•©ë‹ˆë‹¤<br>


## ğŸ™ìš”ì•½
ì´ë²ˆ ê¸€ì—ì„œëŠ” django ì‹œí¬ë¦¿ í‚¤ì— ëŒ€í•œ ì„¤ëª…ê³¼ ì´ë¥¼ ë¶„ë¦¬í•˜ì—¬ gitë“±ì—ì„œ ì†ŒìŠ¤ë¥¼ ê³µê°œí•  ë•Œ ìˆ¨ê¸°ëŠ” ë°©ë²•ì— ëŒ€í•´ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.<br>

1. djangoì˜ ì‹œí¬ë¦¿ í‚¤
2. SECRET_KEY ë¶„ë¦¬ ë° ìˆ¨ê¸°ê¸°

## ğŸ“”SECRET_KEY

![image](/assets/images/0728_28/secret_1.png){:.align-center width="850"}  <br>
  
![image](/assets/images/0728_28/secret_1.png){:.align-center width="70%"}  <br>
  
![image](/assets/images/0728_28/secret_1.png){:.align-center width=70%}  <br>
  
![image](/assets/images/0728_28/secret_1.png){:.align-center width="80%"}  <br>
  
![image](/assets/images/0728_28/secret_1.png){:.align-center width=80%}  <br>

djangoì˜ í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•˜ë©´ settings.pyì— ìœ„ì™€ê°™ì´ SECRET_KEYê°€ ìë™ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ `django-insecure-` ëŠ”ê¸°ë³¸ìœ¼ë¡œ ì•ì— ë¶™ì–´ìˆê³  ë’¤ì— 50ê¸€ìì¸ SECRET_KEYê°€ ë¶™ì–´ìˆëŠ”ë°ìš”<br>
ë§Œì•½ ì—¬ëŸ¬ë¶„ë“¤ì´ ì›í•˜ëŠ” SECRET_KEYë¥¼ ì‚¬ìš©í•˜ê³  ì‹¶ë‹¤ë©´ 50ìì˜ ë¬¸ìì—´ì„ `\` , `'` , `"` ì„ ì‚¬ìš©í•˜ì§€ ì•Šê³  ë§Œë“¤ì–´ì„œ ë„£ìœ¼ë©´ ë©ë‹ˆë‹¤!<br>

ì´ëŠ” djangoì˜ ì—¬ëŸ¬ ê¸°ëŠ¥ë“¤ì—ì„œ ì‚¬ìš©ì´ ë©ë‹ˆë‹¤.<br>
- django.contrib.sessions.backends.cache ì´ì™¸ì˜ session backendë¥¼ ì‚¬ìš©í•˜ê³  ìˆê±°ë‚˜
- ê¸°ë³¸ get_session_auth_hash()ë¥¼ ì‚¬ìš©í•˜ëŠ” ëª¨ë“  sessions
- CookieStorage í˜¹ì€ FallbackStorage ë¥¼ ì‚¬ìš©í•˜ëŠ” ëª¨ë“  messages
- ëª¨ë“  PasswordResetView
- ë‹¤ë¥¸ í‚¤ê°€ ì œê³µë˜ì§€ ì•ŠëŠ” ì•”í˜¸í™” ì„œëª… ì‚¬ìš© ì‹œ 
ì¶œì²˜ : [ì´ˆë³´ëª½í‚¤ë‹˜ ë¸”ë¡œê·¸](https://wayhome25.github.io/django/2017/07/11/django-settings-secret-key/){:target="_blank"}<br>
<br>
ë˜í•œ ë¡œê·¸ì¸ ì‹œì— ì‚¬ìš©í•˜ëŠ” ì¸ì¦,ì¸ê°€ì‹œì—ë„ í† í°ì„ ë°œê¸‰í• ë•Œ í™œìš©ë˜ê¸°ë„ í•©ë‹ˆë‹¤<br>
djangoì˜ ë§ì€ ë³´ì•ˆ ê¸°ëŠ¥ì„ ìœ ì§€í•˜ê¸° ìœ„í•´ì„œ ì‹œí¬ë¦¿ í‚¤ëŠ” ìˆ¨ê¸¸ í•„ìš”ê°€ ìˆìŠµë‹ˆë‹¤<br>


## âœ¨SECRET_KEY ìˆ¨ê¸°ê¸°
ì´ì œ ì´ëŸ¬í•œ SECRET_KEYë¥¼ ìˆ¨ê²¨ ë³´ê² ìŠµë‹ˆë‹¤<br>
ë¨¼ì € BASE_DIRì— secrets.json íŒŒì¼ì„ ë§Œë“­ë‹ˆë‹¤ ë³´í†µ í”„ë¡œì íŠ¸ì˜ ê°€ì¥ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ê°€ BASE_DIRì…ë‹ˆë‹¤(settings.pyê°€ ìˆëŠ” í´ë”ì˜ ìœ„ í´ë”)<br>
settings.pyê°€ ìˆëŠ” í´ë”ë˜í•œ í•˜ë‚˜ì˜ ì•±ì„ ë‹´ë‹¹í•˜ëŠ” í´ë”ì´ë¯€ë¡œstartappìœ¼ë¡œ appì„ ë§Œë“¤ë©´ í´ë”ê°€ ìƒì„±ë˜ëŠ” ê³³ì— secrets.jsoníŒŒì¼ì„ ë§Œë“¤ì–´ ì£¼ì‹œë©´ ë˜ê² ìŠµë‹ˆë‹¤<br>
  
```json
secrets.json
{
  "SECRET_KEY" : "django-insecure-asdfasdfafdasdfasdfasfdasdfasdfasdfadsfasdfasdff(50ê¸€ì)"
}
```
  
ì´ í›„ settings.pyì—ì„œ json íŒ¨í‚¤ì§€ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‹œí¬ë¦¿ í‚¤ë¥¼ ê°€ì ¸ì™€ì„œ ë„£ìŠµë‹ˆë‹¤<br>
  
```py
import os,json
from django.core.exceptions import ImproperlyConfigured

# SECURITY WARNING: keep the secret key used in production secret!
secret_file = os.path.join(BASE_DIR, 'secrets.json') # secrets.json íŒŒì¼ ìœ„ì¹˜ë¥¼ ëª…ì‹œ

with open(secret_file) as f:
    secrets = json.loads(f.read())

def get_secret(setting, secrets=secrets):
    try:
        return secrets[setting]
    except KeyError:
        error_msg = "Set the {} environment variable".format(setting)
        raise ImproperlyConfigured(error_msg)

SECRET_KEY = get_secret("SECRET_KEY")

```
  
ë¬¼ë¡  ë”±íˆ ì—ëŸ¬ ì˜ˆì™¸ì²˜ë¦¬ë¥¼ í•˜ì§€ ì•Šìœ¼ì‹¤ ë¶„ë“¤ì€ í•¨ìˆ˜ë¥¼ ë§Œë“¤ì§€ ì•Šê³  secrets["SECRET_KEY"]ë¡œ ë°”ë¡œ ì ‘ê·¼í•´ì„œ ì‚¬ìš©í•˜ì…”ë„ ë¬´ê´€í•©ë‹ˆë‹¤<br>
ì´í›„ì— .gitigonreì— secrets.jsonì„ ëª…ì‹œí•´ì£¼ë©´ ìœ„ íŒŒì¼ì€ gitì— ì €ì¥ë˜ì§€ ì•Šê² ì£ ?<br>
ê·¸ëŸ¼ ë‹¤ë“¤ ë³´ì•ˆì„ ìƒê°í•˜ë©° í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•´ ë³´ì•„ìš”<br>

<center>ê¸´ê¸€ ë´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤ ì•ˆë…• ğŸ‘‹</center>