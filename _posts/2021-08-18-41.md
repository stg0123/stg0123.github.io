---
layout: single
categories:
    - study
tags:
    - wsgi
    - nginx
    - apache
comments: true
title: "wsgi와 cgi의 개념과 사용해야 하는 이유(feat. was)"
---

안녕하세요👋<br>
이번에는 cgi, wsgi의 개념과 웹 어플리케이션 서버를 배포할 때 왜 사용해야 하는지 또 nginx와 apache는 무엇이고 왜 사용하는지 알아보겠습니다<br>
정말 어려운 질문인데 여기저기 블로그들을 많이 참고하면서 이해해본 내용을 바탕으로 작성하였습니다<br>
실무에서 사용해보신 분들은 정말 잘 알고 계시겠지만 아직 학생이시거나 취준생 분들께 큰 도움이 되었으면 좋겠습니다<br>

## 🙏요약
이번 글에서는 wsgi,cgi에 대해 설명하겠습니다<br>

1. wsgi,cgi란?
2. django 코드로 알아본 wsgi
3. wsgi를 왜 사용해야 할까


## 📝wsgi,cgi란?
- WSGI(Web Server Gateway Interface)는 웹 서버 소프트웨어와 파이썬으로 작성된 웹 응용 프로그램 간의 표준 인터페이스이다.
- CGI(Common Gateway Interface)는 WWW 서버와 서버 상에서 등장하는 다른 프로그램등 HTML에서는 불가능한 인터렉티브한 요소를 홈페이지에 받아 들여 쓸 수 있다.
<br>

쉽게 설명해 보면 cgi는 웹서버와 웹 어플리케이션 사이를 이어주는 인터페이스 역할을 하는 미들웨어 이다.<br>
다시말해 웹 서버는 html이나 js언어 외에는 해석할 수 없기 때문에 우리가 작성한 python이나 java와 같은 언어를 이해하기 위해서는 이를 해석해주는 미들웨어가 필요한 것 이것이 cgi이다<br>
wsgi는 cgi의 개념을 이어받아 cgi의 단점들을 보완해서 python에서 사용하기위에 만들어진 cgi의 한 종류라고 보면 되겠다<br>
cgi는 요청이 들어오면 요청마다 스레드를 생성하여 웹 어플리케이션을 동작시키게 되는데 이는 부하가 너무 크고 10000개이상의 동시 요청은 처리할 수 없게 된다고 한다<br>
이를 해결하고 부하도 줄이기 위해 wsgi는 비동기 방식의 콜백함수로 이루어져 스레드를 생성하지 않고 여러 동시 요청을 처리할 수 있으므로 부하가 적다<br>
따라서 요즘은 wsgi의 종류인 uwsgi나 gunicon등을 많이 사용하게 된다<br>
<br>

![image](/assets/images/0818_41/web_architecture.png){:.align-center}
위 그림이 나름 잘 표현한 웹 용어를 표현한 구조라고 생각한다 물론 구체적인 프로그램 로고들은 예시이다 spring은 jvm이 깔려있는 cgi를 사용해야 하므로 tomcat이 기본이다<br>
각 언어마다 web server에 해석해 줄수 있는 cgi가 다르다고 보면 되겠다<br>
<br>
tomcat 앞에 nginx같은 web server을 두는 경우가 종종 있는데 이는 로드밸런싱을 위한 목적이 대부분이고 이 외에는 큰 의미가 없다고 한다<br>
오히려 서버를 한번 더 거쳐가면서 부하만 생긴다는 것이다 정적 파일들을 web server에서 관리하기 위해 이렇게 한다는 경우가 있다고 하는데 tomcat내에서 충분히 가능하다고 한다<br>
이제 python에서 사용되는 wsgi에 대해 조금더 알아보고 굳이 runserver로 잘 돌아가는 django에서 설정해서 사용해야 하는지 알아보도록 하자<br>


## 🔎django 코드를 통해 알아본 wsgi





<center>긴글 봐주셔서 감사합니다 앞으로도 유용한 내용을 많이 공유하겠습니다 그럼 안녕 👋</center>